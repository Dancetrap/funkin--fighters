(()=>{var e={603:e=>{const t=e=>{document.getElementById("errorMessage").textContent=e,document.getElementById("domoMessage").classList.remove("hidden")};e.exports={handleError:t,sendPost:async(e,a,n)=>{const c=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await c.json();document.getElementById("domoMessage").classList.add("hidden"),r.redirect&&(window.location=r.redirect),r.error&&t(r.error),n&&n(r)},hideError:()=>{document.getElementById("domoMessage").classList.add("hidden")}}}},t={};function a(n){var c=t[n];if(void 0!==c)return c.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}(()=>{a(603);let e,t,n,c,r,o,i=!1;const l=[],s=[],m=[],d=[];let u,h,y=!1;const g=e=>{if(20!==e.team.team.length)return React.createElement("div",{className:"characterList"},React.createElement("h3",{className:"emptyDomo"},"You need a team of 20 players in order to participate"));let a="";return 0!==t.accounts.length&&(a=React.createElement("button",{type:"exist",onClick:R},"Play against Another Player")),React.createElement("div",{className:"characterList"},React.createElement("div",{key:"gameMenu",id:"gameMenu"},React.createElement("button",{type:"ai",onClick:f},"Play against AI"),a))},p=t=>{let a,n=[];for(let t=0;t<20;t++){const a=React.createElement("form",{id:"characterSlot"+t,action:"/remove",method:"POST",className:"d-sides",key:"p"+t},React.createElement("input",{type:"image",height:"50",width:"50",src:"/assets/img/150.png",className:"player",id:"p"+t,disabled:!0}),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e}));n.push(a)}let c=[];for(let t=0;t<20;t++){const a=React.createElement("form",{id:"characterSlot"+t,action:"/remove",method:"POST",className:"d-sides",key:"o"+t},React.createElement("input",{type:"image",height:"50",width:"50",src:"/assets/img/150.png",className:"opponent",id:"o"+t,disabled:!0}),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e}));c.push(a)}return a=i?React.createElement("button",{type:"exist",onClick:f},"Find Another Team"):React.createElement("button",{type:"exist",onClick:R},"Find Another Team"),React.createElement("div",{id:"teams"},React.createElement("div",{id:"twoteams"},React.createElement("div",{id:"teamPlayer"},React.createElement("h2",{id:"pName"}),React.createElement("div",{id:"teamP"},n)),React.createElement("h3",{id:"vs"},"vs."),React.createElement("div",{id:"teamOpponent"},React.createElement("h2",{id:"oName"}),React.createElement("div",{id:"teamO"},c))),React.createElement("div",{id:"buttons"},a,React.createElement("button",{type:"exist",onClick:w},"Play Game")))},E=e=>React.createElement("div",{id:"game"},React.createElement("div",{id:"battle"},React.createElement("div",{id:"player"},React.createElement("h3",{id:"playerCharName"}),React.createElement("img",{src:"",alt:"player",id:"yourGuy"}),React.createElement("h3",{id:"yourNumber"})),React.createElement("h3",null,"vs."),React.createElement("div",{id:"opponent"},React.createElement("h3",{id:"opponentCharName"}),React.createElement("img",{src:"",alt:"opponent",id:"theirGuy"}),React.createElement("h3",{id:"theirNumber"}))),React.createElement("h3",{id:"roll"},"Turn")),f=async()=>{const e=await fetch("/random");c=await e.json(),i=!0,await T(n.team[0],c,"Bot")},R=async()=>{const e=Math.floor(Math.random()*t.accounts.length),a=await fetch(`/theirTeam?team=${t.accounts[e].owner}`);c=await a.json(),await T(n.team[0],c.team)},T=async(t,a,n)=>{ReactDOM.render(React.createElement(p,{csrf:e}),document.getElementById("stage"));const l=r=t.team,s=o=a.team,m=await fetch("/user"),d=await m.json();if(null==n){const e=await fetch(`/oUser?id=${c.team.owner}`),t=await e.json();document.querySelector("#oName").innerHTML=h=t.username}else document.querySelector("#oName").innerHTML=h=n;document.querySelector("#pName").innerHTML=u=d.username;for(let e=0;e<l.length;e++){const t=await fetch(`/getCharacter?name=${l[e]}`),a=await t.json(),n=document.getElementById("p"+e);n.src=a.character.image,n.disable=!1,document.getElementById(`characterSlot${e}`).innerHTML+=`<input id="_id" type="hidden" name="_id" value=${a.character._id} />`}for(let e=0;e<s.length;e++){const t=document.getElementById("o"+e),a=document.getElementById(`characterSlot${e}`);if(i)t.src=s[e].image,a.innerHTML+=`<input id="_id" type="hidden" name="_id" value=${s[e]._id} />`;else{const n=await fetch(`/getCharacter?name=${s[e]}`),c=await n.json();t.src=c.character.image,t.disable=!1,a.innerHTML+=`<input id="_id" type="hidden" name="_id" value=${c.character._id} />`}}},w=async()=>{ReactDOM.render(React.createElement(E,{csrf:e}),document.getElementById("stage")),0!=l.length&&(l.splice(0),s.splice(0),m.splice(0),d.splice(0));for(let e=0;e<20;e++)l.push(r[e]),i?m.push(o[e]._id):m.push(o[e]);y=!0,console.log(u),console.log(h),y&&await H()};let M,v,L,N,B=0,I=0;const H=async()=>{const e=await fetch(`/getCharacter?name=${l[0]}`),t=await e.json();console.log(t.character.image);const a=await fetch(`/getCharacter?name=${m[0]}`),n=await a.json();console.log(n.character.image);const c=document.getElementById("yourGuy"),r=document.getElementById("theirGuy");document.getElementById("playerCharName").innerHTML=t.character.name,document.getElementById("opponentCharName").innerHTML=n.character.name;const o=document.getElementById("yourNumber"),i=document.getElementById("theirNumber");let s;o.innerHTML=I,i.innerHTML=B,c.src=t.character.image,r.src=n.character.image,L=null,N=null,t.character.flip?c.style.transform="scaleX(-1)":c.style.transform=null,console.log(n.character.flip),n.character.flip?r.style.transform=null:r.style.transform="scaleX(-1)",null==M&&null==v&&(s=Math.random()<.5,s?M=!0:v=!0);const d=document.getElementById("roll");v&&(d.innerHTML=`${h}'s Turn`,setTimeout(b,3e3)),M&&(d.innerHTML=`${u}'s Turn`),document.addEventListener("keydown",(function(e){32==e.keyCode&&M&&(L=$(21),o.innerHTML=L,I=L,console.log(L),null==N?(M=!1,v=!0,d.innerHTML=`${h}'s Turn`,setTimeout(b,1e3)):C(L,N))}))};function b(){const e=document.getElementById("roll"),t=document.getElementById("theirNumber");N=$(21),console.log(N),t.innerHTML=N,B=N,null==L?(M=!0,v=!1,e.innerHTML=`${u}'s Turn`):C(L,N)}function $(e){return Math.floor(Math.random()*e)}function C(e,t){e>t?(console.log("You Win"),roll.innerHTML=`Point ${u}`,setTimeout((async function(){d.push(m[0]),m.splice(0,1),0==m.length?console.log("You Win"):(M=!0,v=!1,await H())}),1e3)):e<t?(roll.innerHTML=`Point ${h}`,console.log("You Lose"),setTimeout((async function(){s.push(l[0]),l.splice(0,1),0==l.length?console.log("You Lose"):(M=!1,v=!0,await H())}),1e3)):e==t&&(console.log("Tie"),setTimeout((function(){let e;e=Math.random()<.5,e?M=!0:(v=!0,setTimeout(b,1e3))}),1e3))}window.onload=async()=>{const a=await fetch("/getToken"),c=await a.json();e=c.csrfToken;const r=await fetch("/yourTeam");n=await r.json();const o=await fetch("/accounts");t=await o.json(),ReactDOM.render(React.createElement(g,{team:n.team[0]}),document.getElementById("stage"))}})()})();